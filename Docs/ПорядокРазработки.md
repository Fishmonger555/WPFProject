# 7. Порядок разработки

## Подготовка

*   **Создание проекта и структуры решения:** Создайте новый проект WPF App (.NET Framework или .NET - в зависимости от вашего выбора) в Visual Studio. Создайте структуру папок решения в соответствии с пакетами, определенными на вашей диаграмме. Название проекта может быть: `BookLibrary.App`.
    *   Создайте структуру папок решения. Пример:
        ```
        BookLibrarySolution
        ├── BookLibrary.App (WPF Проект)
        ├── BookLibrary.Core (Библиотека классов)
        ├── BookLibrary.Data (Библиотека классов)
        ```
*   **Установка необходимых пакетов:** Установите требуемые NuGet пакеты для доступа к данным и любых улучшений пользовательского интерфейса. Пример:
    *   `BookLibrary.Data`: Установите Entity Framework Core (или ваш выбранный ORM), его провайдер (например, `Microsoft.EntityFrameworkCore.SqlServer`, если вы подключаетесь к SQL Server).
*   **Настройка начальных параметров:** Настройте любые параметры конфигурации, например, строки подключения к базе данных.
*   **Настройка репозитория Git**:
    *   Создайте локальный Git-репозиторий для вашего проекта (если вы еще этого не сделали).
    *   Создайте удаленный репозиторий на GitHub/Azure DevOps/GitLab.
    *   Свяжите ваш локальный репозиторий с удаленным репозиторием.

## 7.1. Основная модель данных и настройка базы данных

*   **Определение модели данных (Models в BookLibrary.Core):**
    *   Создайте класс `Book` (со свойствами, такими как `Id`, `Title`, `Author`, `Genre`, `PublicationYear`, `ISBN` и т.д.).
*   **Создание DbContext (DbContext в BookLibrary.Data):**
    *   Создайте класс `LibraryContext`, унаследованный от `DbContext`.
    *   Определите свойство `DbSet<Book>`, представляющее таблицу `Books`.
*   **Настройка подключения к базе данных:**
    *   Настройте строку подключения в файле `appsettings.json` (или в аналогичном конфигурационном файле).
    *   Зарегистрируйте `DbContext` в контейнере внедрения зависимостей (если вы его используете, например, в методе `ConfigureServices` в `App.xaml.cs`).
*   **Создание базы данных и начальной миграции:**
    *   Включите миграции в вашем проекте: `Enable-Migrations` в Package Manager Console.
    *   Добавьте начальную миграцию: `Add-Migration InitialCreate`.
    *   Обновите базу данных для создания таблиц: `Update-Database`.
*   **Создание репозиториев (Repositories в BookLibrary.Data):** Создайте `BookRepository` (или аналогичный) для инкапсуляции логики доступа к данным. Реализуйте методы, такие как `GetAllBooks`, `AddBook`, `RemoveBook`, `UpdateBook`, `SearchBooks`.

## 7.2. Заглушка главного окна

*   **Дизайн начального UI (WPF Views в BookLibrary.App):**
    *   Создайте макет главного окна (MainWindow.xaml) с базовыми заполнителями.
    *   Добавьте основные элементы UI (кнопки, элемент списка) для представления основных функциональных возможностей.
*   **Команды:**
    *   "Добавить книгу"
    *   "Редактировать книгу"
    *   "Удалить книгу"
    *   "Поиск книг"
    *   "Выход"
*   **Базовое связывание данных (если используется MVVM):** Если вы используете MVVM (Model-View-ViewModel), создайте базовые ViewModels и свяжите их с элементами UI для тестирования потока данных.
*   **Функциональность отсутствует:** Кнопки и заполнители на данном этапе ничего делать не будут. Это лишь визуальные представления предполагаемой функциональности.

## 7.3. Реализация списка и отображения книг

*   **Разработка функциональности списка книг (ViewModels и Services в BookLibrary.App):**
    *   Реализуйте метод `GetAllBooks` в `BookRepository`.
    *   Создайте `BookListViewModel` для управления списком книг.
    *   Получите список книг из репозитория и предоставьте его как свойство в ViewModel (например, `ObservableCollection<Book>`).
*   **Отображение списка книг в UI (WPF Views в BookLibrary.App):**
    *   Свяжите свойство `ObservableCollection<Book>` из `BookListViewModel` с элементом `ListView` или `DataGrid` в `MainWindow.xaml`.
    *   Отобразите соответствующие свойства книги (Название, Автор и т.д.) в элементе управления списком.
*   **Базовая функциональность поиска:** Реализуйте базовую фильтрацию списка книг на основе поискового запроса.

## 7.4. Реализация функциональности добавления/редактирования книг

*   **Создание диалога добавления/редактирования книги (WPF Views в BookLibrary.App):**
    *   Создайте новое окно (AddEditBookWindow.xaml) для обработки добавления и редактирования книг.
    *   Добавьте текстовые поля для `Title`, `Author`, `Genre`, `PublicationYear`, `ISBN` и т.д.
    *   Добавьте кнопки "Сохранить" и "Отмена".
*   **Разработка ViewModel для книги (ViewModels в BookLibrary.App):**
    *   Создайте ViewModel, которая будет содержать данные для выбранной книги и логику, связанную с сохранением этих данных в базовое хранилище.
*   **Реализация команды "Добавить книгу":**
    *   Реализуйте команду "Add Book" в `BookListViewModel`.
    *   При нажатии на кнопку "Добавить книгу" откройте `AddEditBookWindow`.
    *   В `AddEditBookWindow` создайте новый объект `Book` и свяжите его с элементами UI.
    *   При нажатии "Сохранить", соберите данные из UI, заполните объект `Book`, добавьте его в репозиторий и обновите список в главном окне.
*   **Реализация команды "Редактировать книгу":**
    *   При выборе книги в списке и нажатии на кнопку "Редактировать книгу", откройте `AddEditBookWindow`.
    *   Загрузите данные выбранной книги в элементы UI.
    *   При нажатии "Сохранить", соберите обновленные данные из UI, обновите объект `Book` в репозитории и обновите список в главном окне.

## 7.5. Реализация функциональности удаления книги

*   **Реализация команды "Удалить книгу":**
    *   Реализуйте команду "Delete Book" в `BookListViewModel`.
    *   При нажатии на кнопку "Удалить книгу", отобразите диалог подтверждения ("Вы уверены, что хотите удалить эту книгу?").
    *   Если пользователь подтверждает, удалите выбранную книгу из репозитория и обновите список в главном окне.

## 7.6. Реализация функциональности поиска

*   **Улучшение поиска (ViewModels и Services в BookLibrary.App):**
    *   Улучшите функциональность поиска, чтобы позволить искать по нескольким критериям (Название, Автор, Жанр и т.д.).
    *   Реализуйте более сложные алгоритмы поиска (например, частичные совпадения, регистронезависимый поиск).

## 7.7. Отделка UI и улучшения

*   **Улучшение UI:**
    *   Добавьте валидацию данных в диалоговое окно добавления/редактирования книги.
    *   Реализуйте сортировку и фильтрацию для списка книг.
    *   Добавьте более информативные сообщения состояния.
    *   Добавьте визуальные подсказки (например, значки) к элементам UI.
*   **Добавление тем (Опционально):** Реализуйте темы или скины для настройки внешнего вида приложения.

## 7.8. Тестирование и рефакторинг

*   **Написание модульных тестов (Опционально):** Напишите модульные тесты для Core-логики (например, `BookRepository` и любые бизнес-правила).
*   **Рефакторинг кода:** Рефакторите код для улучшения читаемости, поддерживаемости и производительности.
*   **Исправление ошибок:** Исправьте выявленные ошибки.